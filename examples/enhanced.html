<!doctype html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<title>Enhanced CSS if() Examples - Shorthand Properties</title>
		<style>
			body {
				font-family:
					system-ui,
					-apple-system,
					sans-serif;
				margin: 0;
				padding: 20px;
				background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
				min-height: 100vh;
			}

			.container {
				max-width: 1200px;
				margin: 0 auto;
				background: rgba(255, 255, 255, 0.95);
				padding: 40px;
				border-radius: 20px;
				box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
			}

			h1 {
				text-align: center;
				color: #333;
				margin-bottom: 40px;
				font-size: 2.5em;
			}

			.demo-section {
				margin-bottom: 50px;
				padding: 30px;
				background: #f8f9fa;
				border-radius: 15px;
				border-left: 5px solid #007acc;
			}

			.demo-section h2 {
				color: #007acc;
				margin-top: 0;
			}

			.code-block {
				background: #2d3748;
				color: #e2e8f0;
				padding: 20px;
				border-radius: 10px;
				font-family: "Courier New", monospace;
				margin: 15px 0;
				overflow-x: auto;
				white-space: pre-wrap;
			}

			.example-result {
				padding: 20px;
				border: 2px solid #007acc;
				border-radius: 10px;
				background: white;
				margin: 15px 0;
			}

			/* Enhanced CSS if() examples with shorthand property usage */

			/* 1. Border shorthand with multiple conditions */
			.multi-border {
				border: if(
						media(width >=1200px): 4px; media(width >=768px): 2px;
							else: 1px
					)
					if(supports(border-style: dashed): dashed; else: solid)
					if(media(prefers-color-scheme: dark): #fff; else: #333);
				padding: 20px;
				background: #f0f8ff;
				border-radius: 8px;
			}

			/* 2. Margin shorthand with responsive values */
			.responsive-margin {
				margin: if(
						media(width >=1024px): 40px; media(width >=768px): 20px;
							else: 10px
					)
					if(supports(margin-inline: 20px): auto; else: 0);
				padding: 25px;
				background: linear-gradient(45deg, #ff6b6b, #ee5a24);
				color: white;
				border-radius: 12px;
				text-align: center;
			}

			/* 3. Font shorthand with conditional values */
			.dynamic-font {
				font:
					if(
							supports(font-variation-settings: "wght" 400): 600;
								else: bold
						)
						if(media(width >=768px): 24px; else: 18px)
						if(media(width >=768px): 1.6; else: 1.4)
						if(
							supports(font-family: system-ui): system-ui;
								else: Arial
						),
					sans-serif;
				padding: 20px;
				background: #e3f2fd;
				border-radius: 8px;
			}

			/* 4. Background shorthand with conditional values */
			.conditional-background {
				background: if(
						media(prefers-color-scheme: dark): #2d3748;
							else: #ffffff
					)
					if(
						supports(
								background-image: linear-gradient(
										45deg,
										red,
										blue
									)
							): linear-gradient(
								45deg,
								transparent,
								rgba(0, 122, 204, 0.1)
							)
							; else: none
					)
					if(media(width >=768px): no-repeat; else: repeat)
					if(media(width >=768px): center; else: top left);
				color: if(
					media(prefers-color-scheme: dark): #e2e8f0; else: #2d3748
				);
				padding: 30px;
				border-radius: 12px;
				min-height: 100px;
			}

			/* 5. Box-shadow with multiple conditional layers */
			.layered-shadow {
				box-shadow:
					if(
						supports(box-shadow: 0 0 0 rgba(0, 0, 0, 0.1)): 0 4px
							6px rgba(0, 0, 0, 0.1) ; else: none
					),
					if(
						media(width >=768px): 0 10px 15px rgba(0, 0, 0, 0.1) ;
							else: 0 2px 4px rgba(0, 0, 0, 0.1)
					),
					if(
						supports(box-shadow: inset 0 0 0 rgba(0, 0, 0, 0.1)):
							inset
							0 1px 0 rgba(255, 255, 255, 0.1) ; else: none
					);
				padding: 25px;
				background: white;
				border-radius: 15px;
				margin: 20px 0;
			}

			/* 6. Transform with multiple operations */
			.multi-transform {
				transform: if(
						supports(transform: scale(1)): scale(1.05) ; else: none
					)
					if(
						media(width >=768px): translateY(-5px) ;
							else: translateY(0)
					)
					if(
						supports(transform: rotate(0deg)): rotate(2deg) ;
							else: none
					);
				transition: if(
					media(prefers-reduced-motion: reduce): none; else: all 0.3s
						ease
				);
				padding: 20px;
				background: #4caf50;
				color: white;
				border-radius: 10px;
				cursor: pointer;
			}

			.multi-transform:hover {
				transform: if(
						supports(transform: scale(1)): scale(1.1) ; else: none
					)
					if(
						media(width >=768px): translateY(-10px) ;
							else: translateY(-2px)
					)
					if(
						supports(transform: rotate(0deg)): rotate(-2deg) ;
							else: none
					);
			}

			/* 7. Grid template with conditional columns */
			.adaptive-grid {
				display: if(supports(display: grid): grid; else: flex);
				grid-template-columns: if(
					media(width >=1200px): repeat(4, 1fr) ;
						media(width >=768px): repeat(2, 1fr) ; else: 1fr
				);
				gap: if(supports(gap): 20px; else: 0);
				flex-wrap: if(supports(display: grid): initial; else: wrap);
			}

			.grid-item {
				padding: 20px;
				background: #e1f5fe;
				border-radius: 8px;
				text-align: center;
				margin: if(supports(gap): 0; else: 10px);
			}

			/* 8. Text decoration with multiple styles */
			.fancy-text {
				text-decoration: if(
						supports(text-decoration-line: underline): underline;
							else: none
					)
					if(supports(text-decoration-style: wavy): wavy; else: solid)
					if(
						supports(text-decoration-color: red): #007acc;
							else: currentColor
					);
				text-decoration-thickness: if(
					supports(text-decoration-thickness: 2px): 2px; else: auto
				);
				padding: 15px;
				font-size: 18px;
				font-weight: 600;
			}

			/* 9. Outline with conditional properties */
			.focus-element {
				outline: if(supports(outline-offset): 2px; else: 3px)
					if(supports(outline-style: dashed): dashed; else: solid)
					if(
						media(prefers-color-scheme: dark): #64b5f6;
							else: #1976d2
					);
				outline-offset: if(supports(outline-offset): 4px; else: 0);
				padding: 15px;
				background: #f5f5f5;
				border: none;
				border-radius: 6px;
				cursor: pointer;
			}

			/* 10. Animation with conditional timing */
			.animated-element {
				animation: if(
						media(prefers-reduced-motion: reduce): none; else: pulse
					)
					if(media(width >=768px): 2s; else: 3s)
					if(
						supports(
								animation-timing-function: cubic-bezier(
										0.4,
										0,
										0.2,
										1
									)
							): cubic-bezier(0.4, 0, 0.2, 1)
							; else: ease-in-out
					)
					infinite;
				padding: 20px;
				background: #ff9800;
				color: white;
				border-radius: 10px;
				text-align: center;
			}

			@keyframes pulse {
				0%,
				100% {
					opacity: 1;
				}

				50% {
					opacity: 0.7;
				}
			}
		</style>
	</head>

	<body>
		<div class="container">
			<h1>Enhanced CSS if() Examples</h1>
			<p style="text-align: center; font-size: 18px; color: #666">
				Demonstrating if() functions in CSS shorthand properties
			</p>

			<div class="demo-section">
				<h2>1. Multiple Border Conditions</h2>
				<div class="code-block">
					border: if( media(width >= 1200px): 4px; media(width >=
					768px): 2px; else: 1px ) if( supports(border-style: dashed):
					dashed; else: solid ) if( media(prefers-color-scheme: dark):
					#fff; else: #333 );
				</div>
				<div class="example-result multi-border">
					This element has a border with width, style, and color
					determined by multiple if() functions!
				</div>
			</div>

			<div class="demo-section">
				<h2>2. Responsive Margin with Auto Centering</h2>
				<div class="code-block">
					margin: if( media(width >= 1024px): 40px; media(width >=
					768px): 20px; else: 10px ) if( supports(margin-inline:
					20px): auto; else: 0 );
				</div>
				<div class="example-result responsive-margin">
					Responsive margins with conditional auto-centering
				</div>
			</div>

			<div class="demo-section">
				<h2>3. Dynamic Font Shorthand</h2>
				<div class="code-block">
					font: if( supports(font-variation-settings: "wght" 400):
					600; else: bold ) if( media(width >= 768px): 24px; else:
					18px ) if( media(width >= 768px): 1.6; else: 1.4 ) if(
					supports(font-family: system-ui): system-ui; else: Arial ),
					sans-serif;
				</div>
				<div class="example-result dynamic-font">
					This text uses a complex font shorthand with multiple
					conditional values for weight, size, line-height, and
					family!
				</div>
			</div>

			<div class="demo-section">
				<h2>4. Conditional Background Shorthand</h2>
				<div class="code-block">
					background: if( media(prefers-color-scheme: dark): #2d3748;
					else: #ffffff ) if( supports(background-image:
					linear-gradient(45deg, red, blue)): linear-gradient(45deg,
					transparent, rgba(0, 122, 204, 0.1)); else: none ) if(
					media(width >= 768px): no-repeat; else: repeat ) if(
					media(width >= 768px): center; else: top left );
				</div>
				<div class="example-result conditional-background">
					Background with conditional color, gradient, repeat, and
					position values
				</div>
			</div>

			<div class="demo-section">
				<h2>5. Layered Box Shadow</h2>
				<div class="code-block">
					box-shadow: if( supports(box-shadow: 0 0 0 rgba(0,0,0,0.1)):
					0 4px 6px rgba(0, 0, 0, 0.1); else: none ), if( media(width
					>= 768px): 0 10px 15px rgba(0, 0, 0, 0.1); else: 0 2px 4px
					rgba(0, 0, 0, 0.1) ), if( supports(box-shadow: inset 0 0 0
					rgba(0,0,0,0.1)): inset 0 1px 0 rgba(255, 255, 255, 0.1);
					else: none );
				</div>
				<div class="example-result layered-shadow">
					Multiple conditional shadow layers for enhanced depth
				</div>
			</div>

			<div class="demo-section">
				<h2>6. Multi-Operation Transform</h2>
				<div class="code-block">
					transform: if( supports(transform: scale(1)): scale(1.05);
					else: none ) if( media(width >= 768px): translateY(-5px);
					else: translateY(0) ) if( supports(transform: rotate(0deg)):
					rotate(2deg); else: none );
				</div>
				<div class="example-result multi-transform">
					Hover me! Multiple transform operations with conditional
					support
				</div>
			</div>

			<div class="demo-section">
				<h2>7. Adaptive Grid Layout</h2>
				<div class="code-block">
					grid-template-columns: if( media(width >= 1200px): repeat(4,
					1fr); media(width >= 768px): repeat(2, 1fr); else: 1fr );
				</div>
				<div class="example-result">
					<div class="adaptive-grid">
						<div class="grid-item">Item 1</div>
						<div class="grid-item">Item 2</div>
						<div class="grid-item">Item 3</div>
						<div class="grid-item">Item 4</div>
						<div class="grid-item">Item 5</div>
						<div class="grid-item">Item 6</div>
					</div>
				</div>
			</div>

			<div class="demo-section">
				<h2>8. Advanced Text Decoration</h2>
				<div class="code-block">
					text-decoration: if( supports(text-decoration-line:
					underline): underline; else: none ) if(
					supports(text-decoration-style: wavy): wavy; else: solid )
					if( supports(text-decoration-color: red): #007acc; else:
					currentColor );
				</div>
				<div class="example-result fancy-text">
					This text has conditional decoration with line, style, and
					color
				</div>
			</div>

			<div class="demo-section">
				<h2>9. Conditional Outline</h2>
				<div class="code-block">
					outline: if( supports(outline-offset): 2px; else: 3px ) if(
					supports(outline-style: dashed): dashed; else: solid ) if(
					media(prefers-color-scheme: dark): #64b5f6; else: #1976d2 );
				</div>
				<div class="example-result">
					<button class="focus-element">
						Click me to see conditional outline!
					</button>
				</div>
			</div>

			<div class="demo-section">
				<h2>10. Conditional Animation</h2>
				<div class="code-block">
					animation: if( media(prefers-reduced-motion: reduce): none;
					else: pulse ) if( media(width >= 768px): 2s; else: 3s ) if(
					supports(animation-timing-function: cubic-bezier(0.4, 0,
					0.2, 1)): cubic-bezier(0.4, 0, 0.2, 1); else: ease-in-out )
					infinite;
				</div>
				<div class="example-result animated-element">
					Animated element with conditional timing and easing
				</div>
			</div>
		</div>

		<script type="module">
			// Load the polyfill
			import {
				init,
				processCSSText
			} from "../packages/css-if-polyfill/dist/index.modern.js";

			// Initialize polyfill with debug enabled
			const polyfill = init({ debug: true });

			console.log("Enhanced CSS if() polyfill loaded!");
			console.log("Shorthand property support enabled");

			// Test manual processing
			const testCSS = `
            .test {
                border: if(
                    media(width >= 768px): 2px;
                    else: 1px
                ) if(
                    supports(border-style: dashed): dashed;
                    else: solid
                ) red;

                margin: if(
                    media(width >= 1024px): 20px;
                    media(width >= 768px): 10px;
                    else: 5px
                ) auto;
            }
        `;

			console.log("Test CSS processing:");
			console.log("Input:", testCSS);
			console.log("Output:", processCSSText(testCSS));
		</script>
	</body>
</html>
